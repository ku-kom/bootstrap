!function(v){var e,p,f,g,R,O,F,a=v("#phoneform"),L=v("#box"),d=(v("#emp"),v("#soge")),b=v("#feedback"),K=b.next(v(".ku-loading")),i=v("#reset"),P=(v("#lang").val(),0),n=v(".pagination"),w=[],s=[],l=0;v("#go-find").on("click",function(t){t.preventDefault(),b.html(""),L.html(""),v.trim(d.val()).length?a.trigger("submit"):(d.focus(),b.append('<div class="alert alert-danger" role="alert" aria-atomic="true">Enter search terms<div>'),i.addClass("inactive"))}),v(i).on("click",function(t){d.focus(),i.addClass("inactive"),b.html(""),L.html(""),n.twbsPagination("destroy")}),d.keyup(function(){""==v(this).val()?i.addClass("inactive"):i.removeClass("inactive")}),a.on("submit",function(t){t.preventDefault(),K.show(),v.ajax({url:"https://www2.adm.ku.dk/selv/pls/!app_tlfbog_v2.soeg",data:"format=json&startrecord=0&recordsperpage=100&searchstring="+encodeURIComponent(d.val())+"&env=about",method:"post",jsonp:!1,dataType:"json"}).done(function(t){0<(s=(t.root||{}).employees||[]).length&&v.fn.twbsPagination?(P=s.length,l=Math.ceil(P/10),i.removeClass("inactive"),n.twbsPagination("destroy"),e()):(K.hide(),b.append('<div class="alert alert-warning" role="alert" aria-atomic="true">No results.<div>'))}).fail(function(t,e,a){console.log(t),K.hide(),b.append('<div class="alert alert-danger" role="alert" aria-atomic="true">Error communicating with the webservice. Try again later.<div>')}),e=function(){var t=!0===window.matchMedia("(max-width: 768px)").matches?3:5;n.twbsPagination({totalPages:l,visiblePages:t,hideOnlyOnePage:!0,onPageClick:function(t,e){O=10*Math.max(e-1,0),F=10+O,w=s.slice(O,F),function(){var t,e=v('<ul class="media-list" id="emp" />');b.html(""),L.html(""),K.hide();for(var a=0;a<w.length;a++){var d,i,n=p(w[a].PERSON_FORNAVN)?"":'<dt>Name</dt><dd><div class="ku-navn">'+w[a].PERSON_FORNAVN+" "+w[a].PERSON_EFTERNAVN+"</div></dd>",s=p(w[a].FOTOURL)?"":'<img class="media-object" src="'+w[a].FOTOURL+'" alt="'+w[a].PERSON_FORNAVN+" "+w[a].PERSON_EFTERNAVN+'">',l=p(w[a].ANSAT_UOFF_STIL_TEKST)?"":w[a].ANSAT_UOFF_STIL_TEKST,o=p(w[a].ANSAT_UOFF_STIL_TEKST_ENGELSK)?l:w[a].ANSAT_UOFF_STIL_TEKST_ENGELSK;d=p(o)?"":"<dt>Title</dt><dd>"+o+"</dd>";var r,c=p(w[a].ANSAT_FUNKTION)?"":w[a].ANSAT_FUNKTION,A=p(w[a].ANSAT_FUNKTION_ENGELSK)?c:w[a].ANSAT_FUNKTION_ENGELSK;i=p(A)?"":"<dt>Function</dt><dd>"+A+"</dd>";var N=p(w[a].STED_NAVN_SAMLET)?"":w[a].STED_NAVN_SAMLET,T=p(w[a].STED_NAVN_SAMLET_ENG)?N:w[a].STED_NAVN_SAMLET_ENG;r=p(T)?"":"<dt>Unit/&shy;dept.</dt><dd>"+T+"</dd>";var _=p(w[a].ANSAT_TLF_SEKR)?"":"<dt>Secretary</dt><dd>"+R(w[a].ANSAT_TLF_SEKR)+"</dd>",S=p(w[a].ANSAT_WWW)?"":"<dt>Website</dt><dd>"+g(w[a].ANSAT_WWW)+"</dd>",u='<dl class="dl-horizontal"><div class="ku-result"><div class="contact-right">'+s+"</div>"+n+d+i+(p(w[a].ANSAT_PURE_UK)?"":'<dt>Profile</dt><dd><a aria-label="Research by '+w[a].PERSON_FORNAVN+" "+w[a].PERSON_EFTERNAVN+'" href="'+w[a].ANSAT_PURE_UK+'">Research profile and publications</a></dd>')+r+'</div><div class="ku-kontakt">'+(p(w[a].ANSAT_ARB_EMAIL)?"":"<dt>Email</dt><dd>"+f(w[a].ANSAT_ARB_EMAIL)+"</dd>")+(p(w[a].ANSAT_MOBIL)?"":"<dt>Mobile</dt><dd>"+R(w[a].ANSAT_MOBIL)+"</dd>")+(p(w[a].ANSAT_ARB_TLF)?"":"<dt>Phone</dt><dd>"+R(w[a].ANSAT_ARB_TLF)+"</dd>")+_+S+(p(w[a].ANSAT_ADRESSE)?"":"<dt>Address</dt><dd>"+w[a].ANSAT_ADRESSE+"</dd>")+(p(w[a].LOKATION)?"":"<dt>Location</dt><dd>"+w[a].LOKATION+"</dd>")+(p(w[a].BEMAERK)?"":"<dt>Remarks</dt><dd>"+w[a].BEMAERK+"</dd>")+"</div></dl>";(t=v('<li class="contact-list"/>')).append(u),e.append(t);var E=0==O?1+O:O,h=P<10||P<F?P:F,m=1<P?"results.":"result.";b.html("Showing "+E+" to "+h+" out of "+P+" "+m)}L.append(e)}(),v(document).on("click",".page-item",function(t){v("html, body").stop(),v("html, body").animate({scrollTop:v(a).offset().top},500),v(window).bind("mousewheel",function(){v("html, body").stop()})})}})},f=function(t){return!0===/(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/.test(t)?'<a class="ku-mail" href="mailto:'+t+'">'+t+"</a>":t},g=function(t){return!0===/(https?:\/\/[^\s]+)/g.test(t)?'<a href="'+t+'">'+t+"</a>":t},R=function(t){if(!0!==/^[+]*[(]{0,1}[0-9]{1,3}[)]{0,1}[-\s\./0-9]*$/g.test(t))return t;(t=t.replace(/[^0-9+]+/g,"")).match(/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im)||(t="+45"+t);var e=[t.slice(0,3)," ",t.slice(3,5)," ",t.slice(5,7)," ",t.slice(7,9)," ",t.slice(9)].join("");return'<a href="tel:'+t+'">'+e+"</a>"},p=function(t){return null==t||"undefined"==t||0===t.length}})}(jQuery);
//# sourceMappingURL=phonebook_en.min.js.map