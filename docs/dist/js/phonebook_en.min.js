!function(p){var f,e,g,R,O,F,L,b,a=p("#phoneform"),K=p("#box"),d=(p("#emp"),p("#soge")),P=p("#feedback"),w=P.next(p(".ku-loading")),i=p("#reset"),k=(p("#lang").val(),0),U=[],n=[],s=0;p("#go-find").on("click",function(t){t.preventDefault(),P.html(""),K.html(""),p.trim(d.val()).length?a.trigger("submit"):(d.focus(),P.append('<div class="alert alert-danger" role="alert" aria-atomic="true">Enter search terms<div>'),i.addClass("inactive"))}),p(i).on("click",function(t){d.focus(),i.addClass("inactive"),P.html(""),K.html(""),f.twbsPagination("destroy")}),d.keyup(function(){""==p(this).val()?i.addClass("inactive"):i.removeClass("inactive")}),a.on("submit",function(t){t.preventDefault(),w.show(),p.ajax({url:"https://www2.adm.ku.dk/selv/pls/!app_tlfbog_v2.soeg",data:"format=json&startrecord=0&recordsperpage=100&searchstring="+encodeURIComponent(d.val())+"&env=about",method:"post",jsonp:!1,dataType:"json"}).done(function(t){0<(n=(t.root||{}).employees||[]).length&&p.fn.twbsPagination?(k=n.length,s=Math.ceil(k/10),i.removeClass("inactive"),f.twbsPagination("destroy"),e()):(w.hide(),P.append('<div class="alert alert-warning" role="alert" aria-atomic="true">No results.<div>'))}).fail(function(t,e,a){console.log(t),w.hide(),P.append('<div class="alert alert-danger" role="alert" aria-atomic="true">Error communicating with the webservice. Try again later.<div>')}),e=function(){var t=!0===window.matchMedia("(max-width: 768px)").matches?3:5;f.twbsPagination({totalPages:s,visiblePages:t,hideOnlyOnePage:!0,onPageClick:function(t,e){L=10*Math.max(e-1,0),b=10+L,U=n.slice(L,b),function(){var t,e=p('<ul class="pagination" />'),a=p('<ul class="media-list" id="emp" />');P.html(""),K.html(""),w.hide();for(var d=0;d<U.length;d++){var i,n,s=g(U[d].PERSON_FORNAVN)?"":'<dt>Name</dt><dd><div class="ku-navn">'+U[d].PERSON_FORNAVN+" "+U[d].PERSON_EFTERNAVN+"</div></dd>",l=g(U[d].FOTOURL)?"":'<img class="media-object" src="'+U[d].FOTOURL+'" alt="'+U[d].PERSON_FORNAVN+" "+U[d].PERSON_EFTERNAVN+'">',o=g(U[d].ANSAT_UOFF_STIL_TEKST)?"":U[d].ANSAT_UOFF_STIL_TEKST,r=g(U[d].ANSAT_UOFF_STIL_TEKST_ENGELSK)?o:U[d].ANSAT_UOFF_STIL_TEKST_ENGELSK;i=g(r)?"":"<dt>Title</dt><dd>"+r+"</dd>";var c,A=g(U[d].ANSAT_FUNKTION)?"":U[d].ANSAT_FUNKTION,N=g(U[d].ANSAT_FUNKTION_ENGELSK)?A:U[d].ANSAT_FUNKTION_ENGELSK;n=g(N)?"":"<dt>Function</dt><dd>"+N+"</dd>";var T=g(U[d].STED_NAVN_SAMLET)?"":U[d].STED_NAVN_SAMLET,_=g(U[d].STED_NAVN_SAMLET_ENG)?T:U[d].STED_NAVN_SAMLET_ENG;c=g(_)?"":"<dt>Unit/&shy;dept.</dt><dd>"+_+"</dd>";var S=g(U[d].ANSAT_TLF_SEKR)?"":"<dt>Secretary</dt><dd>"+F(U[d].ANSAT_TLF_SEKR)+"</dd>",u=g(U[d].ANSAT_WWW)?"":"<dt>Website</dt><dd>"+O(U[d].ANSAT_WWW)+"</dd>",E='<dl class="dl-horizontal"><div class="ku-result"><div class="contact-right">'+l+"</div>"+s+i+n+(g(U[d].ANSAT_PURE_UK)?"":'<dt>Profile</dt><dd><a aria-label="Research by '+U[d].PERSON_FORNAVN+" "+U[d].PERSON_EFTERNAVN+'" href="'+U[d].ANSAT_PURE_UK+'">Research profile and publications</a></dd>')+c+'</div><div class="ku-kontakt">'+(g(U[d].ANSAT_ARB_EMAIL)?"":"<dt>Email</dt><dd>"+R(U[d].ANSAT_ARB_EMAIL)+"</dd>")+(g(U[d].ANSAT_MOBIL)?"":"<dt>Mobile</dt><dd>"+F(U[d].ANSAT_MOBIL)+"</dd>")+(g(U[d].ANSAT_ARB_TLF)?"":"<dt>Phone</dt><dd>"+F(U[d].ANSAT_ARB_TLF)+"</dd>")+S+u+(g(U[d].ANSAT_ADRESSE)?"":"<dt>Address</dt><dd>"+U[d].ANSAT_ADRESSE+"</dd>")+(g(U[d].LOKATION)?"":"<dt>Location</dt><dd>"+U[d].LOKATION+"</dd>")+(g(U[d].BEMAERK)?"":"<dt>Remarks</dt><dd>"+U[d].BEMAERK+"</dd>")+"</div></dl>";(t=p('<li class="contact-list"/>')).append(E),a.append(t);var h=0==L?1+L:L,m=k<10||k<b?k:b,v=1<k?"results.":"result.";P.html("Showing "+h+" to "+m+" out of "+k+" "+v)}K.append(a),e.insertBefore(K),e.insertAfter(K),f=p(".pagination")}(),p(document).on("click",".page-item",function(t){p("html, body").stop(),p("html, body").animate({scrollTop:p(a).offset().top},500),p(window).bind("mousewheel",function(){p("html, body").stop()})})}})},R=function(t){return!0===/(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/.test(t)?'<a class="ku-mail" href="mailto:'+t+'">'+t+"</a>":t},O=function(t){return!0===/(https?:\/\/[^\s]+)/g.test(t)?'<a href="'+t+'">'+t+"</a>":t},F=function(t){if(!0!==/^[+]*[(]{0,1}[0-9]{1,3}[)]{0,1}[-\s\./0-9]*$/g.test(t))return t;(t=t.replace(/[^0-9+]+/g,"")).match(/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im)||(t="+45"+t);var e=[t.slice(0,3)," ",t.slice(3,5)," ",t.slice(5,7)," ",t.slice(7,9)," ",t.slice(9)].join("");return'<a href="tel:'+t+'">'+e+"</a>"},g=function(t){return null==t||"undefined"==t||0===t.length}})}(jQuery);
//# sourceMappingURL=phonebook_en.min.js.map