!function(g){var e,T,v,f,h,_,p,a=g("#phoneform"),S=g("#results"),d=(g("#emp"),g("#soge")),E=g("#feedback"),R=E.next(g(".ku-loading")),i=g("#reset"),O=(g("#lang").val(),0),n=g(".pagination"),k=[],s=[],l=0;g("#go-find").on("click",function(t){t.preventDefault(),E.html(""),S.html(""),g.trim(d.val()).length?a.trigger("submit"):(d.focus(),E.append('<div class="alert alert-danger" role="alert" aria-atomic="true">Angiv s&oslash;geord<div>'),i.addClass("inactive"))}),g(i).on("click",function(t){d.focus(),i.addClass("inactive"),E.html(""),S.html(""),n.twbsPagination("destroy")}),d.keyup(function(){""==g(this).val()?i.addClass("inactive"):i.removeClass("inactive")}),a.on("submit",function(t){t.preventDefault(),R.show(),g.ajax({url:"https://www2.adm.ku.dk/selv/pls/!app_tlfbog_v2.soeg",data:"format=json&startrecord=0&recordsperpage=100&searchstring="+encodeURIComponent(d.val())+"&env=om",method:"post",jsonp:!1,dataType:"json"}).done(function(t){0<(s=(t.root||{}).employees||[]).length&&g.fn.twbsPagination?(O=s.length,l=Math.ceil(O/10),i.removeClass("inactive"),n.twbsPagination("destroy"),e()):(R.hide(),E.append('<div class="alert alert-warning" role="alert" aria-atomic="true">Ingen resultater fundet.<div>'))}).fail(function(t,e,a){console.log(t),R.hide(),E.append('<div class="alert alert-danger" role="alert" aria-atomic="true">Fejl i kommunikationen med webservicen - prøv igen senere.<div>')}),e=function(){var t=!0===window.matchMedia("(max-width: 768px)").matches?3:5;n.twbsPagination({totalPages:l,visiblePages:t,hideOnlyOnePage:!0,first:"Første",prev:"forrige",next:"Næste",last:"Sidste",onPageClick:function(t,e){_=10*Math.max(e-1,0),p=10+_,k=s.slice(_,p),function(){var t,e=g.parseHTML('<ul class="media-list" id="emp">');E.html(""),S.html(""),R.hide();for(var a=0;a<k.length;a++){var d=T(k[a].PERSON_FORNAVN)?"":'<dt>Navn</dt><dd><div class="ku-navn">'+k[a].PERSON_FORNAVN+" "+k[a].PERSON_EFTERNAVN+"</div></dd>",i=T(k[a].FOTOURL)?"":'<img class="media-object" src="'+k[a].FOTOURL+'" alt="'+k[a].PERSON_FORNAVN+" "+k[a].PERSON_EFTERNAVN+'">',n=T(k[a].ANSAT_UOFF_STIL_TEKST)?"":"<dt>Titel</dt><dd>"+k[a].ANSAT_UOFF_STIL_TEKST+"</dd>",s=T(k[a].STED_NAVN_SAMLET)?"":"<dt>Enhed/&shy;afdeling</dt><dd>"+k[a].STED_NAVN_SAMLET+"</dd>",l=T(k[a].ANSAT_FUNKTION)?"":"<dt>Funktion</dt><dd>"+k[a].ANSAT_FUNKTION+"</dd>",o=T(k[a].ANSAT_TLF_SEKR)?"":"<dt>Sekret&aelig;r</dt><dd>"+h(k[a].ANSAT_TLF_SEKR)+"</dd>",r=T(k[a].ANSAT_PURE_DK)?"":'<dt>Profil</dt><dd><a aria-label="Forskning af '+k[a].PERSON_FORNAVN+" "+k[a].PERSON_EFTERNAVN+'" href="'+k[a].ANSAT_PURE_DK+'">Forskning og publikationer</a></dd>',c=T(k[a].ANSAT_WWW)?"":"<dt>Website</dt><dd>"+f(k[a].ANSAT_WWW)+"</dd>",A='<dl class="dl-horizontal"><div class="ku-result"><div class="contact-right">'+i+"</div>"+d+n+l+r+s+'</div><div class="ku-kontakt">'+(T(k[a].ANSAT_ARB_EMAIL)?"":"<dt>E-mail</dt><dd>"+v(k[a].ANSAT_ARB_EMAIL)+"</dd>")+(T(k[a].ANSAT_MOBIL)?"":"<dt>Mobil</dt><dd>"+h(k[a].ANSAT_MOBIL)+"</dd>")+(T(k[a].ANSAT_ARB_TLF)?"":"<dt>Telefon</dt><dd>"+h(k[a].ANSAT_ARB_TLF)+"</dd>")+o+c+(T(k[a].ANSAT_ADRESSE)?"":"<dt>Adresse</dt><dd>"+k[a].ANSAT_ADRESSE+"</dd>")+(T(k[a].LOKATION)?"":"<dt>Lokation</dt><dd>"+k[a].LOKATION+"</dd>")+(T(k[a].BEMAERK)?"":"<dt>Bem&aelig;rk&shy;ninger</dt><dd>"+k[a].BEMAERK+"</dd>")+"</div></dl>";(t=g('<li class="contact-list"/>')).append(A),e.append(t);var u=0==_?1+_:_,N=O<10||O<p?O:p,m=1<O?"resultater.":"resultat.";E.html("Viser "+u+" til "+N+" ud af "+O+" "+m)}S.append(e)}(),g(document).on("click",".page-item",function(t){g("html, body").stop(),g("html, body").animate({scrollTop:g(a).offset().top},500),g(window).bind("mousewheel",function(){g("html, body").stop()})})}})},v=function(t){return!0===/(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/.test(t)?'<a class="ku-mail" href="mailto:'+t+'">'+t+"</a>":t},f=function(t){return!0===/(https?:\/\/[^\s]+)/g.test(t)?'<a href="'+t+'">'+t+"</a>":t},h=function(t){if(!0!==/^[+]*[(]{0,1}[0-9]{1,3}[)]{0,1}[-\s\./0-9]*$/g.test(t))return t;(t=t.replace(/[^0-9+]+/g,"")).match(/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im)||(t="+45"+t);var e=[t.slice(0,3)," ",t.slice(3,5)," ",t.slice(5,7)," ",t.slice(7,9)," ",t.slice(9)].join("");return'<a href="tel:'+t+'">'+e+"</a>"},T=function(t){return null==t||0===t.length}})}(jQuery);
//# sourceMappingURL=phonebook_da.min.js.map