!function(f){var h,e,T,p,_,S,E,k,a=f("#phoneform"),R=f("#box"),d=(f("#emp"),f("#soge")),O=f("#feedback"),F=O.next(f(".ku-loading")),i=f("#reset"),b=(f("#lang").val(),0),n=f(".pagination"),l=[],s=0;f("#go-find").on("click",function(t){t.preventDefault(),O.html(""),R.html(""),f.trim(d.val()).length?a.trigger("submit"):(d.focus(),O.append('<div class="alert alert-danger" role="alert" aria-atomic="true">Angiv s&oslash;geord<div>'),i.addClass("inactive"))}),f(i).on("click",function(t){d.focus(),i.addClass("inactive"),O.html(""),R.html(""),n.twbsPagination("destroy")}),d.keyup(function(){""==f(this).val()?i.addClass("inactive"):i.removeClass("inactive")}),a.on("submit",function(t){t.preventDefault(),F.show(),f.ajax({url:"https://www2.adm.ku.dk/selv/pls/!app_tlfbog_v2.soeg",data:"format=json&startrecord=0&recordsperpage=100&searchstring="+encodeURIComponent(d.val())+"&env=om",method:"post",jsonp:!1,dataType:"json"}).done(function(t){0<(l=(t.root||{}).employees||[]).length&&f.fn.twbsPagination?(b=l.length,s=Math.ceil(b/10),i.removeClass("inactive"),n.twbsPagination("destroy"),e()):(F.hide(),O.append('<div class="alert alert-warning" role="alert" aria-atomic="true">Ingen resultater fundet.<div>'))}).fail(function(t,e,a){console.log(t),F.hide(),O.append('<div class="alert alert-danger" role="alert" aria-atomic="true">Fejl i kommunikationen med webservicen - prøv igen senere.<div>')}),e=function(){n.show();var t=!0===window.matchMedia("(max-width: 767px)").matches?3:5;n.twbsPagination({totalPages:s,visiblePages:t,hideOnlyOnePage:!0,first:"Første",prev:"forrige",next:"Næste",last:"Sidste",onPageClick:function(t,e){E=10*Math.max(e-1,0),k=10+E,h=l.slice(E,k),function(){var t=f('<ul class="media-list" id="emp" />');O.html(""),R.html(""),F.hide();for(var e=0;e<h.length;e++){var a,d=T(h[e].PERSON_FORNAVN)?"":'<dt>Navn</dt><dd><div class="ku-navn">'+h[e].PERSON_FORNAVN+" "+h[e].PERSON_EFTERNAVN+"</div></dd>",i=T(h[e].FOTOURL)?"":'<img class="media-object" src="'+h[e].FOTOURL+'" alt="">',n=T(h[e].ANSAT_UOFF_STIL_TEKST)?"":"<dt>Titel</dt><dd>"+h[e].ANSAT_UOFF_STIL_TEKST+"</dd>",l=T(h[e].STED_NAVN_SAMLET)?"":"<dt>Enhed/&shy;afdeling</dt><dd>"+h[e].STED_NAVN_SAMLET+"</dd>",s=T(h[e].ANSAT_FUNKTION)?"":"<dt>Funktion</dt><dd>"+h[e].ANSAT_FUNKTION+"</dd>",o=T(h[e].ANSAT_TLF_SEKR)?"":"<dt>Sekret&aelig;r</dt><dd>"+S(h[e].ANSAT_TLF_SEKR)+"</dd>",r=T(h[e].ANSAT_PURE_DK)?"":'<dt>Profil</dt><dd><a aria-label="Forskning og publikationer af '+h[e].PERSON_FORNAVN+" "+h[e].PERSON_EFTERNAVN+'" href="'+h[e].ANSAT_PURE_DK+'">Forskning og publikationer</a></dd>',c=T(h[e].ANSAT_WWW)?"":"<dt>Website</dt><dd>"+_(h[e].ANSAT_WWW)+"</dd>",A=T(h[e].ANSAT_ARB_EMAIL)?"":"<dt>E-mail</dt><dd>"+p(h[e].ANSAT_ARB_EMAIL)+"</dd>",u=T(h[e].ANSAT_MOBIL)?"":"<dt>Mobil</dt><dd>"+S(h[e].ANSAT_MOBIL)+"</dd>",m=T(h[e].ANSAT_ARB_TLF)?"":"<dt>Telefon</dt><dd>"+S(h[e].ANSAT_ARB_TLF)+"</dd>",g=T(h[e].ANSAT_ADRESSE)?"":"<dt>Adresse</dt><dd>"+h[e].ANSAT_ADRESSE+"</dd>",v=T(h[e].LOKATION)?"":"<dt>Lokation</dt><dd>"+h[e].LOKATION+"</dd>",N=T(h[e].BEMAERK)?"":"<dt>Bem&aelig;rk&shy;ninger</dt><dd>"+h[e].BEMAERK+"</dd>";(a=f('<li class="contact-list"/>')).append('<dl class="dl-horizontal"><div class="ku-result"><div class="contact-right">'+i+"</div>"+d+n+s+r+l+'</div><div class="ku-kontakt">'+A+u+m+o+c+g+v+N+"</div></dl>"),t.append(a),O.html('<div aria-atomic="true">Viser '+(0==E?1+E:E)+" til "+(b<10||b<k?b:k)+" ud af "+b+" "+(1<b?"resultater.":"resultat.")+"</div>")}R.append(t)}(),f(document).on("click",".page-item",function(t){f("html, body").stop(),f("html, body").animate({scrollTop:f(a).offset().top},500),f(window).bind("mousewheel",function(){f("html, body").stop()})})}}),f(".page-item > a").attr("rel","nofollow")},p=function(t){return!0===/(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/.test(t)?'<a class="ku-mail" href="mailto:'+t+'">'+t+"</a>":t},_=function(t){return!0===/(https?:\/\/[^\s]+)/g.test(t)?'<a href="'+t+'">'+t+"</a>":t},S=function(t){if(!0!==/^[+]*[(]{0,1}[0-9]{1,3}[)]{0,1}[-\s\./0-9]*$/g.test(t))return t;var e=[(t=!(t=t.replace(/[^0-9+]+/g,"")).match(/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im)?"+45"+t:t).slice(0,3)," ",t.slice(3,5)," ",t.slice(5,7)," ",t.slice(7,9)," ",t.slice(9)].join("");return'<a href="tel:'+t+'">'+e+"</a>"},T=function(t){return null==t||0===t.length}})}(jQuery);
//# sourceMappingURL=phonebook_da.min.js.map