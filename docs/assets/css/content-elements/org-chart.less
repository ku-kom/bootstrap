@import "../../../../less/variables.less";
// Organisational chart

ol {
  &.org-chart {
    & {
      text-align: center;
    }

    &,
    ol {
      list-style: none;
      margin: 0;
      padding: 0;
    }

    ol {
      padding-top: 1em;
    }

    li,
    li > div,
    ol {
      position: relative;

      &::after,
      &::before {
        background-color: @gray;
        content: '';
        position: absolute;
      }
    }

    ol {
      & > li {
        padding: 1em 0 0 1em;
      }
    }

    & > li {
      ol {
        &::before {
          height: 1em;
          left: 50%;
          top: 0;
          width: @ku-org-chart-line;
        }

        &::after {
          height: @ku-org-chart-line;
          left: @ku-org-chart-line;
          top: 1em;
          width: 50%;
        }

        & > li {
          &:not(:last-of-type) {
            &::before {
              height: @ku-org-chart-line;
              left: 0;
              top: 2em;
              width: 1em;
            }

            &::after {
              height: 100%;
              left: 0;
              top: 0;
              width: @ku-org-chart-line;
            }
          }

          &:last-of-type {
            &::before {
              height: @ku-org-chart-line;
              left: 0;
              top: 2em;
              width: 1em;
            }

            &::after {
              height: 2em;
              left: 0;
              top: 0;
              width: @ku-org-chart-line;
            }
          }
        }
      }
    }

    li {
      & > div {
        border: 2px solid @gray;
        border-radius: @border-radius-base;
        min-height: 2em;
        padding: 0.5em;

        &:hover {
          background-color: #c8e4f8;
          transition: all .1s ease-in;

          &~ol {
            &::after,
            &::before {
              background-color: #c8e4f8;
              transition: all .1s ease-in;
            }
            &>li {
              &::after,
              &::before {
                background-color: #c8e4f8;
                transition: all .1s ease-in;
              }
              &> div {
                background-color: #c8e4f8;
                transition: all .1s ease-in;
              }
            }
          }
        }
      }
    }
    // First level chart:
    & > li {
      & > div {
        margin-right: 1em;

        &::before {
          bottom: 2em;
          height: @ku-org-chart-line;
          right: -1em;
          width: 1em;
        }

        &:first-of-type:after {
          bottom: 0;
          height: 2em;
          right: -1em;
          width: @ku-org-chart-line;
        }

        &+div {
          margin-top: 1em;

          &::after {
            height: calc(100% + 1em);
            right: -1em;
            top: -1em;
            width: @ku-org-chart-line;
          }
        }
      }

      // Second level chart:
      & > ol {
        &::before {
          left: inherit;
          right: 0;
        }

        &::after {
          left: 0;
          width: 100%;
        }
        // Second level chart:
        //& > li {
        //  & > div {
        //   background-color: #a13c40;
        // }
        // Third level:
        // & > ol > li > div {
        //   background-color: #b15f61;
        // }
        // Fourth level:
        // & > ol > li > div {
        //   background-color: #c78c8e;
        // }
        // Fifth level:
        // & > ol > li > div {
        //   background-color: #d8afb0;
        // }
        //}
      }
    }
    @media only screen and (min-width: @screen-md) {
      & > li {
        & > div {
          display: inline-block;
          float: none;
          margin: 0 1em 1em;
          vertical-align: bottom;

          &:only-of-type {
            margin-bottom: 0;
            width: calc((100% / 1) - 2em - 4px);
          }

          &:first-of-type:nth-last-of-type(2),
          &:first-of-type:nth-last-of-type(2)~div {
            width: calc((100% / 2) - 2em - 4px);
          }

          &:first-of-type:nth-last-of-type(3),
          &:first-of-type:nth-last-of-type(3)~div {
            width: calc((100% / 3) - 2em - 4px);
          }

          &:first-of-type:nth-last-of-type(4),
          &:first-of-type:nth-last-of-type(4)~div {
            width: calc((100% / 4) - 2em - 4px);
          }

          &:first-of-type:nth-last-of-type(5),
          &:first-of-type:nth-last-of-type(5)~div {
            width: calc((100% / 5) - 2em - 4px);
          }

          &::after,
          &::before {
            bottom: -1em !important;
            top: inherit !important;
          }

          &::before {
            height: 1em !important;
            left: 50% !important;
            width: @ku-org-chart-line !important;
          }

          &:only-of-type {
            &::after {
              display: none;
            }
          }

          &:first-of-type:not(:only-of-type)::after,
          &:last-of-type:not(:only-of-type):after {
            bottom: -1em;
            height: @ku-org-chart-line;
            width: calc(50% + 1em + @ku-org-chart-line);
          }

          &:first-of-type:not(:only-of-type):after {
            left: calc(50% + @ku-org-chart-line);
          }

          &:last-of-type:not(:only-of-type):after {
            left: calc(-1em - @ku-org-chart-line);
          }

          &+div:not(:last-of-type):after {
            height: @ku-org-chart-line;
            left: -2em;
            width: calc(100% + 4em);
          }
        }

        & > ol {
          display: flex;
          flex-wrap: nowrap;

          & > li::before,
          &::before {
            height: 1em !important;
            left: 50% !important;
            top: 0 !important;
            width: 2px !important;
          }

          &::after {
            display: none;
          }

          & > li {
            flex-grow: 1;
            padding-left: 1em;
            padding-right: 1em;
            padding-top: 1em;

            &:only-of-type {
              padding-top: 0;

              &::after,
              &::before {
                display: none;
              }
            }

            &:first-of-type:not(:only-of-type)::after,
            &:last-of-type:not(:only-of-type)::after {
              height: @ku-org-chart-line;
              top: 0;
              width: 50%;
            }

            &:first-of-type:not(:only-of-type)::after {
              left: 50%;
            }

            &:last-of-type:not(:only-of-type)::after {
              left: 0;
            }

            &+li:not(:last-of-type):after {
              height: @ku-org-chart-line;
              left: 0;
              top: 0;
              width: 100%;
            }
          }
        }
      }
    }
  }
}
