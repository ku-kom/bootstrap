!function(p){var e,f,g,R,O,F,L,a=p("#phoneform"),b=p("#box"),d=(p("#emp"),p("#soge")),K=p("#feedback"),P=K.next(p(".ku-loading")),i=p("#reset"),w=(p("#lang").val(),0),n=p(".pagination"),k=[],s=[],l=0;p("#go-find").on("click",function(t){t.preventDefault(),K.html(""),b.html(""),p.trim(d.val()).length?a.trigger("submit"):(d.focus(),K.append('<div class="alert alert-danger" role="alert" aria-atomic="true">Enter search terms<div>'),i.addClass("inactive"))}),p(i).on("click",function(t){d.focus(),i.addClass("inactive"),K.html(""),b.html(""),n.twbsPagination("destroy")}),d.keyup(function(){""==p(this).val()?i.addClass("inactive"):i.removeClass("inactive")}),a.on("submit",function(t){t.preventDefault(),P.show(),p.ajax({url:"https://www2.adm.ku.dk/selv/pls/!app_tlfbog_v2.soeg",data:"format=json&startrecord=0&recordsperpage=100&searchstring="+encodeURIComponent(d.val())+"&env=about",method:"post",jsonp:!1,dataType:"json"}).done(function(t){0<(s=(t.root||{}).employees||[]).length&&p.fn.twbsPagination?(w=s.length,l=Math.ceil(w/10),i.removeClass("inactive"),n.twbsPagination("destroy"),e()):(P.hide(),K.append('<div class="alert alert-warning" role="alert" aria-atomic="true">No results.<div>'))}).fail(function(t,e,a){console.log(t),P.hide(),K.append('<div class="alert alert-danger" role="alert" aria-atomic="true">Error communicating with the webservice. Try again later.<div>')}),e=function(){var t=!0===window.matchMedia("(max-width: 768px)").matches?3:5;n.twbsPagination({totalPages:l,visiblePages:t,hideOnlyOnePage:!0,onPageClick:function(t,e){F=10*Math.max(e-1,0),L=10+F,k=s.slice(F,L),function(){var t,e=p('<ul class="pagination" />'),a=p('<ul class="media-list" id="emp" />');K.html(""),b.html(""),P.hide();for(var d=0;d<k.length;d++){var i,n,s=f(k[d].PERSON_FORNAVN)?"":'<dt>Name</dt><dd><div class="ku-navn">'+k[d].PERSON_FORNAVN+" "+k[d].PERSON_EFTERNAVN+"</div></dd>",l=f(k[d].FOTOURL)?"":'<img class="media-object" src="'+k[d].FOTOURL+'" alt="'+k[d].PERSON_FORNAVN+" "+k[d].PERSON_EFTERNAVN+'">',o=f(k[d].ANSAT_UOFF_STIL_TEKST)?"":k[d].ANSAT_UOFF_STIL_TEKST,r=f(k[d].ANSAT_UOFF_STIL_TEKST_ENGELSK)?o:k[d].ANSAT_UOFF_STIL_TEKST_ENGELSK;i=f(r)?"":"<dt>Title</dt><dd>"+r+"</dd>";var c,A=f(k[d].ANSAT_FUNKTION)?"":k[d].ANSAT_FUNKTION,N=f(k[d].ANSAT_FUNKTION_ENGELSK)?A:k[d].ANSAT_FUNKTION_ENGELSK;n=f(N)?"":"<dt>Function</dt><dd>"+N+"</dd>";var T=f(k[d].STED_NAVN_SAMLET)?"":k[d].STED_NAVN_SAMLET,_=f(k[d].STED_NAVN_SAMLET_ENG)?T:k[d].STED_NAVN_SAMLET_ENG;c=f(_)?"":"<dt>Unit/&shy;dept.</dt><dd>"+_+"</dd>";var S=f(k[d].ANSAT_TLF_SEKR)?"":"<dt>Secretary</dt><dd>"+O(k[d].ANSAT_TLF_SEKR)+"</dd>",u=f(k[d].ANSAT_WWW)?"":"<dt>Website</dt><dd>"+R(k[d].ANSAT_WWW)+"</dd>",E='<dl class="dl-horizontal"><div class="ku-result"><div class="contact-right">'+l+"</div>"+s+i+n+(f(k[d].ANSAT_PURE_UK)?"":'<dt>Profile</dt><dd><a aria-label="Research by '+k[d].PERSON_FORNAVN+" "+k[d].PERSON_EFTERNAVN+'" href="'+k[d].ANSAT_PURE_UK+'">Research profile and publications</a></dd>')+c+'</div><div class="ku-kontakt">'+(f(k[d].ANSAT_ARB_EMAIL)?"":"<dt>Email</dt><dd>"+g(k[d].ANSAT_ARB_EMAIL)+"</dd>")+(f(k[d].ANSAT_MOBIL)?"":"<dt>Mobile</dt><dd>"+O(k[d].ANSAT_MOBIL)+"</dd>")+(f(k[d].ANSAT_ARB_TLF)?"":"<dt>Phone</dt><dd>"+O(k[d].ANSAT_ARB_TLF)+"</dd>")+S+u+(f(k[d].ANSAT_ADRESSE)?"":"<dt>Address</dt><dd>"+k[d].ANSAT_ADRESSE+"</dd>")+(f(k[d].LOKATION)?"":"<dt>Location</dt><dd>"+k[d].LOKATION+"</dd>")+(f(k[d].BEMAERK)?"":"<dt>Remarks</dt><dd>"+k[d].BEMAERK+"</dd>")+"</div></dl>";(t=p('<li class="contact-list"/>')).append(E),a.append(t);var h=0==F?1+F:F,m=w<10||w<L?w:L,v=1<w?"results.":"result.";K.html("Showing "+h+" to "+m+" out of "+w+" "+v)}b.append(a),e.insertBefore(b),e.insertAfter(b)}(),p(document).on("click",".page-item",function(t){p("html, body").stop(),p("html, body").animate({scrollTop:p(a).offset().top},500),p(window).bind("mousewheel",function(){p("html, body").stop()})})}})},g=function(t){return!0===/(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/.test(t)?'<a class="ku-mail" href="mailto:'+t+'">'+t+"</a>":t},R=function(t){return!0===/(https?:\/\/[^\s]+)/g.test(t)?'<a href="'+t+'">'+t+"</a>":t},O=function(t){if(!0!==/^[+]*[(]{0,1}[0-9]{1,3}[)]{0,1}[-\s\./0-9]*$/g.test(t))return t;(t=t.replace(/[^0-9+]+/g,"")).match(/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im)||(t="+45"+t);var e=[t.slice(0,3)," ",t.slice(3,5)," ",t.slice(5,7)," ",t.slice(7,9)," ",t.slice(9)].join("");return'<a href="tel:'+t+'">'+e+"</a>"},f=function(t){return null==t||"undefined"==t||0===t.length}})}(jQuery);
//# sourceMappingURL=phonebook_en.min.js.map