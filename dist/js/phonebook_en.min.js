!function(m){var e,v,f,p,g,R,O,a=m("#phoneform"),F=m("#emp"),d=m("#soge"),L=m("#feedback"),b=L.next(m(".ku-loading")),i=m("#reset"),K=(m("#lang").val(),0),n=m(".pagination"),P=[],o=[],l=0;m("#go-find").on("click",function(t){t.preventDefault(),L.html(""),F.html(""),m.trim(d.val()).length?a.trigger("submit"):(d.focus(),L.append('<div class="alert alert-danger" role="alert" aria-atomic="true">Enter search terms<div>'),i.addClass("inactive"))}),m(i).on("click",function(t){d.focus(),i.addClass("inactive"),L.html(""),F.html(""),n.twbsPagination("destroy")}),d.keyup(function(){""==m(this).val()?i.addClass("inactive"):i.removeClass("inactive")}),a.on("submit",function(t){t.preventDefault(),b.show(),m.ajax({url:"https://www2.adm.ku.dk/selv/pls/!app_tlfbog_v2.soeg",data:"format=json&startrecord=0&recordsperpage=100&searchstring="+encodeURIComponent(d.val())+"&env=about",method:"post",jsonp:!1,dataType:"json"}).done(function(t){0<(o=(t.root||{}).employees||[]).length&&m.fn.twbsPagination?(K=o.length,l=Math.ceil(K/10),i.removeClass("inactive"),n.twbsPagination("destroy"),e()):(b.hide(),L.append('<div class="alert alert-warning" role="alert" aria-atomic="true">No results.<div>'))}).fail(function(t,e,a){console.log(t),b.hide(),L.append('<div class="alert alert-danger" role="alert" aria-atomic="true">Error communicating with the webservice. Try again later.<div>')}),e=function(){var t=!0===window.matchMedia("(max-width: 768px)").matches?3:5;n.twbsPagination({totalPages:l,visiblePages:t,hideOnlyOnePage:!0,onPageClick:function(t,e){R=10*Math.max(e-1,0),O=10+R,P=o.slice(R,O),function(){var t;L.html(""),F.html(""),b.hide();for(var e=0;e<P.length;e++){var a,d,i=v(P[e].PERSON_FORNAVN)?"":'<dt>Name</dt><dd><div class="ku-navn">'+P[e].PERSON_FORNAVN+" "+P[e].PERSON_EFTERNAVN+"</div></dd>",n=v(P[e].FOTOURL)?"":'<img class="media-object" src="'+P[e].FOTOURL+'" alt="'+P[e].PERSON_FORNAVN+" "+P[e].PERSON_EFTERNAVN+'">',o=v(P[e].ANSAT_UOFF_STIL_TEKST)?"":P[e].ANSAT_UOFF_STIL_TEKST,l=v(P[e].ANSAT_UOFF_STIL_TEKST_ENGELSK)?o:P[e].ANSAT_UOFF_STIL_TEKST_ENGELSK;l&&(a="<dt>Title</dt><dd>"+l+"</dd>");var s,r=v(P[e].ANSAT_FUNKTION)?"":P[e].ANSAT_FUNKTION,c=v(P[e].ANSAT_FUNKTION_ENGELSK)?r:P[e].ANSAT_FUNKTION_ENGELSK;c&&(d="<dt>Function</dt><dd>"+c+"</dd>");var A=v(P[e].STED_NAVN_SAMLET)?"":P[e].STED_NAVN_SAMLET,N=v(P[e].STED_NAVN_SAMLET_ENG)?A:P[e].STED_NAVN_SAMLET_ENG;N&&(s="<dt>Unit/&shy;dept.</dt><dd>"+N+"</dd>");var T=v(P[e].ANSAT_TLF_SEKR)?"":"<dt>Secretary</dt><dd>"+g(P[e].ANSAT_TLF_SEKR)+"</dd>",_=v(P[e].ANSAT_WWW)?"":"<dt>Website</dt><dd>"+p(P[e].ANSAT_WWW)+"</dd>",S='<dl class="dl-horizontal"><div class="ku-result"><div class="contact-right">'+n+"</div>"+i+a+d+(v(P[e].ANSAT_PURE_UK)?"":'<dt>Profile</dt><dd><a aria-label="Research by '+P[e].PERSON_FORNAVN+" "+P[e].PERSON_EFTERNAVN+'" href="'+P[e].ANSAT_PURE_UK+'">Research profile and publications</a></dd>')+s+'</div><div class="ku-kontakt">'+(v(P[e].ANSAT_ARB_EMAIL)?"":"<dt>Email</dt><dd>"+f(P[e].ANSAT_ARB_EMAIL)+"</dd>")+(v(P[e].ANSAT_MOBIL)?"":"<dt>Mobile</dt><dd>"+g(P[e].ANSAT_MOBIL)+"</dd>")+(v(P[e].ANSAT_ARB_TLF)?"":"<dt>Phone</dt><dd>"+g(P[e].ANSAT_ARB_TLF)+"</dd>")+T+_+(v(P[e].ANSAT_ADRESSE)?"":"<dt>Address</dt><dd>"+P[e].ANSAT_ADRESSE+"</dd>")+(v(P[e].LOKATION)?"":"<dt>Location</dt><dd>"+P[e].LOKATION+"</dd>")+(v(P[e].BEMAERK)?"":"<dt>Remarks</dt><dd>"+P[e].BEMAERK+"</dd>")+"</div></dl>";(t=m('<li class="contact-list"/>')).append(S),F.append(t);var E=0==R?1+R:R,u=K<10||K<O?K:O,h=1<K?"results.":"result.";L.html("Showing "+E+" to "+u+" out of "+K+" "+h)}}(),m(document).on("click",".page-item",function(t){m("html, body").stop(),m("html, body").animate({scrollTop:m(a).offset().top},500),m(window).bind("mousewheel",function(){m("html, body").stop()})})}})},f=function(t){return!0===/(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/.test(t)?'<a class="ku-mail" href="mailto:'+t+'">'+t+"</a>":t},p=function(t){return!0===/(https?:\/\/[^\s]+)/g.test(t)?'<a href="'+t+'">'+t+"</a>":t},g=function(t){if(!0!==/^[+]*[(]{0,1}[0-9]{1,3}[)]{0,1}[-\s\./0-9]*$/g.test(t))return t;(t=t.replace(/-/g,"")).match(/^\+/)||(t="+45"+t);var e=[t.slice(0,3)," ",t.slice(3,5)," ",t.slice(5,7)," ",t.slice(7,9)," ",t.slice(9)].join("");return'<a href="tel:'+t+'">'+e+"</a>"},v=function(t){return null==t||0===t.length}})}(jQuery);
//# sourceMappingURL=phonebook_en.min.js.map