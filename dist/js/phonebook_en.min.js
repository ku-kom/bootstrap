!function(T){var e,_,S,u,E,v,h,d=T("#phoneform"),g=T("#emp"),a=T("#soge"),m=T("#feedback"),f=m.next(T(".ku-loading")),n=T("#reset"),p=(T("#lang").val(),0),i=T(".pagination"),O=[],o=[],s=0;T("#go-find").on("click",function(t){t.preventDefault(),m.html(""),g.html(""),T.trim(a.val()).length?d.trigger("submit"):(a.focus(),m.append('<div class="alert alert-danger" role="alert" aria-atomic="true">Enter search terms<div>'),n.addClass("inactive"))}),T(n).on("click",function(t){a.focus(),n.addClass("inactive"),m.html(""),g.html(""),i.twbsPagination("destroy")}),a.keyup(function(){""==T(this).val()?n.addClass("inactive"):n.removeClass("inactive")}),d.on("submit",function(t){t.preventDefault(),f.show(),T.ajax({url:"https://www2.adm.ku.dk/selv/pls/!app_tlfbog_v2.soeg",data:"format=json&startrecord=0&recordsperpage=100&searchstring="+encodeURIComponent(a.val())+"&env=about",method:"post",jsonp:!1,dataType:"json"}).done(function(t){console.log(t),0<(o=(t.root||{}).employees||[]).length&&T.fn.twbsPagination?(p=o.length,s=Math.ceil(p/10),n.removeClass("inactive"),i.twbsPagination("destroy"),e()):(f.hide(),m.append('<div class="alert alert-warning" role="alert" aria-atomic="true">No results.<div>'))}).fail(function(t,e,d){console.log(t),f.hide(),m.append('<div class="alert alert-danger" role="alert" aria-atomic="true">Error communicating with the webservice. Try again later.<div>')}),e=function(){i.twbsPagination({totalPages:s,visiblePages:5,hideOnlyOnePage:!0,first:"Første",prev:"forrige",next:"Næste",last:"Sidste",onPageClick:function(t,e){v=10*Math.max(e-1,0),h=10+v,O=o.slice(v,h),function(){var t;m.html(""),g.html(""),f.hide();for(var e=0;e<O.length;e++){var d,a,n,i=_(O[e].PERSON_FORNAVN)?"":'<dt>Navn</dt><dd><div class="ku-navn">'+O[e].PERSON_FORNAVN+" "+O[e].PERSON_EFTERNAVN+"</div></dd>",o=_(O[e].FOTOURL)?"":'<img class="media-object" src="'+O[e].FOTOURL+'" alt="'+O[e].PERSON_FORNAVN+" "+O[e].PERSON_EFTERNAVN+'">';_(O[e].ANSAT_UOFF_STIL_TEKST_ENGELSK)&&_(O[e].ANSAT_UOFF_STIL_TEKST)?d="":_(O[e].ANSAT_UOFF_STIL_TEKST_ENGELSK)&&!1===_(O[e].ANSAT_UOFF_STIL_TEKST)&&(d="<dt>Title</dt><dd>"+O[e].ANSAT_UOFF_STIL_TEKST+"</dd>"),_(O[e].ANSAT_FUNKTION_ENGELSK)&&_(O[e].ANSAT_FUNKTION)?a="":_(O[e].ANSAT_FUNKTION_ENGELSK)&&!1===_(O[e].ANSAT_FUNKTION)&&(a="<dt>Function</dt><dd>"+O[e].ANSAT_FUNKTION+"</dd>"),_(O[e].STED_NAVN_SAMLET_ENG)&&_(O[e].STED_NAVN_SAMLET)?n="":_(O[e].STED_NAVN_SAMLET_ENG)&&!1===_(O[e].STED_NAVN_SAMLET)&&(n="<dt>Unit/&shy;dept.</dt><dd>"+O[e].STED_NAVN_SAMLET+"</dd>");var s=_(O[e].ANSAT_TLF_SEKR)?"":"<dt>Secretary</dt><dd>"+E(O[e].ANSAT_TLF_SEKR)+"</dd>",l=_(O[e].ANSAT_WWW)?"":"<dt>Website</dt><dd>"+u(O[e].ANSAT_WWW)+"</dd>",r='<dl class="dl-horizontal"><div class="ku-result"><div class="contact-right">'+o+"</div>"+i+d+a+n+'</div><div class="ku-kontakt">'+(_(O[e].ANSAT_ARB_EMAIL)?"":"<dt>E-mail</dt><dd>"+S(O[e].ANSAT_ARB_EMAIL)+"</dd>")+(_(O[e].ANSAT_MOBIL)?"":"<dt>Mobile</dt><dd>"+E(O[e].ANSAT_MOBIL)+"</dd>")+(_(O[e].ANSAT_ARB_TLF)?"":"<dt>Phone</dt><dd>"+E(O[e].ANSAT_ARB_TLF)+"</dd>")+s+l+(_(O[e].ANSAT_ADRESSE)?"":"<dt>Address</dt><dd>"+O[e].ANSAT_ADRESSE+"</dd>")+(_(O[e].LOKATION)?"":"<dt>Location</dt><dd>"+O[e].LOKATION+"</dd>")+(_(O[e].BEMAERK)?"":"<dt>Remarks</dt><dd>"+O[e].BEMAERK+"</dd>")+"</div></dl>";(t=T('<li class="contact-list"/>')).append(r),g.append(t);var A=0==v?1+v:v,c=p<10||p<h?p:h,N=1<p?"results.":"result.";m.html("Showing "+A+" to "+c+" out of "+p+" "+N)}}(),T(document).on("click",".page-item",function(t){T("html, body").stop(),T("html, body").animate({scrollTop:T(d).offset().top},500),T(window).bind("mousewheel",function(){T("html, body").stop()})})}})},S=function(t){return!0===/(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/.test(t)?'<a class="ku-mail" href="mailto:'+t+'">'+t+"</a>":t},u=function(t){return!0===/(https?:\/\/[^\s]+)/g.test(t)?'<a href="'+t+'">'+t+"</a>":t},E=function(t){return!0===/^[+]*[(]{0,1}[0-9]{1,3}[)]{0,1}[-\s\./0-9]*$/g.test(t)?'<a href="tel:'+(t=t.replace(/-/g,""))+'">'+t+"</a>":t},_=function(t){return null==t||0===t.length}})}(jQuery);
//# sourceMappingURL=phonebook_en.min.js.map