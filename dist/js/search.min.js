window.searchCallbacks=[],jQuery(function(){var a=function(a){return"/"===a?a:a.replace(/\/$/,"")},b=function(b){if(a(b.url)!==a(document.location.origin+document.location.pathname))return!1;if(b.param)for(var c in b.param)if(getUrlParameter(c)!==b.param[c])return!1;return!0},c=jQuery("form.search_form");c.each(function(){var a=jQuery(this),c=a.find("input.search_query"),d=a.find("select.search_filter"),e=a.hasClass("search_reset");if(window.searchEngines){for(var f=0;f<window.searchEngines.length;f++){var g=window.searchEngines[f],h=jQuery(document.createElement("option"));h.text(g.label),h.val(f),!e&&b(g)&&(h.attr("selected","selected"),c.val(getUrlParameter(g.querykey))),d.append(h)}a.submit(function(b){var e=window.searchEngines[d.val()];if(a.attr("action",e.url),a.attr("method",e.method||"GET"),c.attr("name",e.querykey),e.param)for(var f in e.param){var g=jQuery(document.createElement("input"));g.attr("type","hidden"),g.attr("name",f),g.val(e.param[f]),a.append(g)}for(var h=0;h<window.searchCallbacks.length;h++){var i=window.searchCallbacks[h];jQuery.isFunction(i)&&i(e,this)}})}})});