!function(g){var e,T,m,v,f,h,_,d=g("#phoneform"),S=g("#emp"),a=g("#soge"),p=g("#feedback"),E=p.next(g(".ku-loading")),n=g("#reset"),R=(g("#lang").val(),0),i=g(".pagination"),O=[],l=[],s=0;g("#go-find").on("click",function(t){t.preventDefault(),p.html(""),S.html(""),g.trim(a.val()).length?d.trigger("submit"):(a.focus(),p.append('<div class="alert alert-danger" role="alert" aria-atomic="true">Angiv s&oslash;geord<div>'),n.addClass("inactive"))}),g(n).on("click",function(t){a.focus(),n.addClass("inactive"),p.html(""),S.html(""),i.twbsPagination("destroy")}),a.keyup(function(){""==g(this).val()?n.addClass("inactive"):n.removeClass("inactive")}),d.on("submit",function(t){t.preventDefault(),E.show(),g.ajax({url:"https://www2.adm.ku.dk/selv/pls/!app_tlfbog_v2.soeg",data:"format=json&startrecord=0&recordsperpage=100&searchstring="+encodeURIComponent(a.val())+"&env=om",method:"post",jsonp:!1,dataType:"json"}).done(function(t){0<(l=(t.root||{}).employees||[]).length&&g.fn.twbsPagination?(R=l.length,s=Math.ceil(R/10),n.removeClass("inactive"),i.twbsPagination("destroy"),e()):(E.hide(),p.append('<div class="alert alert-warning" role="alert" aria-atomic="true">Ingen resultater fundet.<div>'))}).fail(function(t,e,d){console.log(t),E.hide(),p.append('<div class="alert alert-danger" role="alert" aria-atomic="true">Fejl i kommunikationen med webservicen - prøv igen senere.<div>')}),e=function(){var t=!0===window.matchMedia("(max-width: 768px)").matches?3:5;i.twbsPagination({totalPages:s,visiblePages:t,hideOnlyOnePage:!0,first:"Første",prev:"forrige",next:"Næste",last:"Sidste",onPageClick:function(t,e){h=10*Math.max(e-1,0),_=10+h,O=l.slice(h,_),function(){var t;p.html(""),S.html(""),E.hide();for(var e=0;e<O.length;e++){var d=T(O[e].PERSON_FORNAVN)?"":'<dt>Navn</dt><dd><div class="ku-navn">'+O[e].PERSON_FORNAVN+" "+O[e].PERSON_EFTERNAVN+"</div></dd>",a=T(O[e].FOTOURL)?"":'<img class="media-object" src="'+O[e].FOTOURL+'" alt="'+O[e].PERSON_FORNAVN+" "+O[e].PERSON_EFTERNAVN+'">',n=T(O[e].ANSAT_UOFF_STIL_TEKST)?"":"<dt>Titel</dt><dd>"+O[e].ANSAT_UOFF_STIL_TEKST+"</dd>",i=T(O[e].STED_NAVN_SAMLET)?"":"<dt>Enhed/&shy;afdeling</dt><dd>"+O[e].STED_NAVN_SAMLET+"</dd>",l=T(O[e].ANSAT_FUNKTION)?"":"<dt>Funktion</dt><dd>"+O[e].ANSAT_FUNKTION+"</dd>",s=T(O[e].ANSAT_TLF_SEKR)?"":"<dt>Sekret&aelig;r</dt><dd>"+f(O[e].ANSAT_TLF_SEKR)+"</dd>",o=T(O[e].ANSAT_PURE_DK)?"":'<dt>Profil</dt><dd><a aria-label="Forskning af '+O[e].PERSON_FORNAVN+" "+O[e].PERSON_EFTERNAVN+'" href="'+O[e].ANSAT_PURE_DK+'">Forskning og publikationer</a></dd>',r=T(O[e].ANSAT_WWW)?"":"<dt>Website</dt><dd>"+v(O[e].ANSAT_WWW)+"</dd>",c='<dl class="dl-horizontal"><div class="ku-result"><div class="contact-right">'+a+"</div>"+d+n+l+o+i+'</div><div class="ku-kontakt">'+(T(O[e].ANSAT_ARB_EMAIL)?"":"<dt>E-mail</dt><dd>"+m(O[e].ANSAT_ARB_EMAIL)+"</dd>")+(T(O[e].ANSAT_MOBIL)?"":"<dt>Mobil</dt><dd>"+f(O[e].ANSAT_MOBIL)+"</dd>")+(T(O[e].ANSAT_ARB_TLF)?"":"<dt>Telefon</dt><dd>"+f(O[e].ANSAT_ARB_TLF)+"</dd>")+s+r+(T(O[e].ANSAT_ADRESSE)?"":"<dt>Adresse</dt><dd>"+O[e].ANSAT_ADRESSE+"</dd>")+(T(O[e].LOKATION)?"":"<dt>Lokation</dt><dd>"+O[e].LOKATION+"</dd>")+(T(O[e].BEMAERK)?"":"<dt>Bem&aelig;rk&shy;ninger</dt><dd>"+O[e].BEMAERK+"</dd>")+"</div></dl>";(t=g('<li class="contact-list"/>')).append(c),S.append(t);var A=0==h?1+h:h,u=R<10||R<_?R:_,N=1<R?"resultater.":"resultat.";p.html("Viser "+A+" til "+u+" ud af "+R+" "+N)}}(),g(document).on("click",".page-item",function(t){g("html, body").stop(),g("html, body").animate({scrollTop:g(d).offset().top},500),g(window).bind("mousewheel",function(){g("html, body").stop()})})}})},m=function(t){return!0===/(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/.test(t)?'<a class="ku-mail" href="mailto:'+t+'">'+t+"</a>":t},v=function(t){return!0===/(https?:\/\/[^\s]+)/g.test(t)?'<a href="'+t+'">'+t+"</a>":t},f=function(t){if(!0!==/^[+]*[(]{0,1}[0-9]{1,3}[)]{0,1}[-\s\./0-9]*$/g.test(t))return t;(t=t.replace(/-/g,"")).match(/^\+/)||(t="+45"+t);var e=[t.slice(0,3)," ",t.slice(3,5)," ",t.slice(5,7)," ",t.slice(7,9)," ",t.slice(9)].join("");return'<a href="tel:'+t+'">'+e+"</a>"},T=function(t){return null==t||0===t.length}})}(jQuery);
//# sourceMappingURL=phonebook_da.min.js.map