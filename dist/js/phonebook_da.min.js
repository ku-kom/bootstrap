!function(N){var e,g,T,v,f,m,h,d=N("#phoneform"),S=N("#emp"),a=N("#soge"),p=N("#feedback"),_=p.next(N(".ku-loading")),n=N("#reset"),E=(N("#lang").val(),0),i=N(".pagination"),O=[],l=[],o=0;N("#go-find").on("click",function(t){t.preventDefault(),p.html(""),S.html(""),N.trim(a.val()).length?d.trigger("submit"):(a.focus(),p.append('<div class="alert alert-danger" role="alert" aria-atomic="true">Angiv s&oslash;geord<div>'),n.addClass("inactive"))}),N(n).on("click",function(t){a.focus(),n.addClass("inactive"),p.html(""),S.html(""),i.twbsPagination("destroy")}),a.keyup(function(){""==N(this).val()?n.addClass("inactive"):n.removeClass("inactive")}),d.on("submit",function(t){t.preventDefault(),_.show(),N.ajax({url:"https://www2.adm.ku.dk/selv/pls/!app_tlfbog.soeg",data:"format=json&startrecord=0&recordsperpage=100&searchstring="+encodeURIComponent(a.val())+"&env=om",method:"post",jsonp:!1,dataType:"json"}).done(function(t){console.log(t),0<(l=(t.root||{}).employees||[]).length&&N.fn.twbsPagination?(E=l.length,o=Math.ceil(E/10),n.removeClass("inactive"),i.twbsPagination("destroy"),e()):(_.hide(),p.append('<div class="alert alert-warning" role="alert" aria-atomic="true">Ingen resultater fundet.<div>'))}).fail(function(t,e,d){console.log(t),_.hide(),p.append('<div class="alert alert-danger" role="alert" aria-atomic="true">Fejl i kommunikationen med webservicen - prøv igen senere.<div>')}),e=function(){i.twbsPagination({totalPages:o,visiblePages:5,hideOnlyOnePage:!0,first:"Første",prev:"forrige",next:"Næste",last:"Sidste",onPageClick:function(t,e){m=10*Math.max(e-1,0),h=10+m,O=l.slice(m,h),function(){var t;p.html(""),S.html(""),_.hide();for(var e=0;e<O.length;e++){var d=g(O[e].PERSON_FORNAVN)?"":'<dt>Navn</dt><dd><div class="ku-navn">'+O[e].PERSON_FORNAVN+" "+O[e].PERSON_EFTERNAVN+"</div></dd>",a=g(O[e].FOTOURL)?"":'<img class="media-object" src="'+O[e].FOTOURL+'" alt="'+O[e].PERSON_FORNAVN+" "+O[e].PERSON_EFTERNAVN+'">',n=g(O[e].ANSAT_UOFF_STIL_TEKST)?"":"<dt>Titel</dt><dd>"+O[e].ANSAT_UOFF_STIL_TEKST+"</dd>",i=g(O[e].STED_NAVN_SAMLET)?"":"<dt>Enhed/&shy;afdeling</dt><dd>"+O[e].STED_NAVN_SAMLET+"</dd>",l=g(O[e].ANSAT_FUNKTION)?"":"<dt>Funktion</dt><dd>"+O[e].ANSAT_FUNKTION+"</dd>",o=g(O[e].ANSAT_TLF_SEKR)?"":"<dt>Sekret&aelig;r</dt><dd>"+f(O[e].ANSAT_TLF_SEKR)+"</dd>",s=g(O[e].ANSAT_WWW)?"":"<dt>Website</dt><dd>"+v(O[e].ANSAT_WWW)+"</dd>",r='<dl class="dl-horizontal"><div class="ku-result"><div class="contact-right">'+a+"</div>"+d+n+l+i+'</div><div class="ku-kontakt">'+(g(O[e].ANSAT_ARB_EMAIL)?"":"<dt>E-mail</dt><dd>"+T(O[e].ANSAT_ARB_EMAIL)+"</dd>")+(g(O[e].ANSAT_MOBIL)?"":"<dt>Mobil</dt><dd>"+f(O[e].ANSAT_MOBIL)+"</dd>")+(g(O[e].ANSAT_ARB_TLF)?"":"<dt>Telefon</dt><dd>"+f(O[e].ANSAT_ARB_TLF)+"</dd>")+o+s+(g(O[e].ANSAT_ADRESSE)?"":"<dt>Adresse</dt><dd>"+O[e].ANSAT_ADRESSE+"</dd>")+(g(O[e].LOKATION)?"":"<dt>Lokation</dt><dd>"+O[e].LOKATION+"</dd>")+"</div></dl>";(t=N('<li class="contact-list"/>')).append(r),S.append(t);var c=0==m?1+m:m,A=E<10||E<h?E:h,u=1<E?"resultater.":"resultat.";p.html("Viser "+c+" til "+A+" ud af "+E+" "+u)}}(),N(document).on("click",".page-item",function(t){N("html, body").stop(),N("html, body").animate({scrollTop:N(d).offset().top},500),N(window).bind("mousewheel",function(){N("html, body").stop()})})}})},T=function(t){return!0===/(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/.test(t)?'<a class="ku-mail" href="mailto:'+t+'">'+t+"</a>":t},v=function(t){return!0===/(https?:\/\/[^\s]+)/g.test(t)?'<a href="'+t+'">'+t+"</a>":t},f=function(t){return!0===/^[+]*[(]{0,1}[0-9]{1,3}[)]{0,1}[-\s\./0-9]*$/g.test(t)?'<a href="tel:'+(t=t.replace(/-/g,""))+'">'+t+"</a>":t},g=function(t){return null==t||0===t.length}})}(jQuery);
//# sourceMappingURL=phonebook_da.min.js.map