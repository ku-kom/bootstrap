!function(g){var e,N,v,T,m,f,h,d=g("#phoneform"),S=g("#emp"),a=g("#soge"),_=g("#feedback"),p=_.next(g(".ku-loading")),n=g("#reset"),E=(g("#lang").val(),0),i=g(".pagination"),O=[],l=[],s=0;g("#go-find").on("click",function(t){t.preventDefault(),_.html(""),S.html(""),g.trim(a.val()).length?d.trigger("submit"):(a.focus(),_.append('<div class="alert alert-danger" role="alert" aria-atomic="true">Angiv s&oslash;geord<div>'),n.addClass("inactive"))}),g(n).on("click",function(t){a.focus(),n.addClass("inactive"),_.html(""),S.html(""),i.twbsPagination("destroy")}),a.keyup(function(){""==g(this).val()?n.addClass("inactive"):n.removeClass("inactive")}),d.on("submit",function(t){t.preventDefault(),p.show(),g.ajax({url:"https://www2.adm.ku.dk/selv/pls/!app_tlfbog_v2.soeg",data:"format=json&startrecord=0&recordsperpage=100&searchstring="+encodeURIComponent(a.val())+"&env=om",method:"post",jsonp:!1,dataType:"json"}).done(function(t){console.log(t),0<(l=(t.root||{}).employees||[]).length&&g.fn.twbsPagination?(E=l.length,s=Math.ceil(E/10),n.removeClass("inactive"),i.twbsPagination("destroy"),e()):(p.hide(),_.append('<div class="alert alert-warning" role="alert" aria-atomic="true">Ingen resultater fundet.<div>'))}).fail(function(t,e,d){console.log(t),p.hide(),_.append('<div class="alert alert-danger" role="alert" aria-atomic="true">Fejl i kommunikationen med webservicen - prøv igen senere.<div>')}),e=function(){i.twbsPagination({totalPages:s,visiblePages:5,hideOnlyOnePage:!0,first:"Første",prev:"forrige",next:"Næste",last:"Sidste",onPageClick:function(t,e){f=10*Math.max(e-1,0),h=10+f,O=l.slice(f,h),function(){var t;_.html(""),S.html(""),p.hide();for(var e=0;e<O.length;e++){var d=N(O[e].PERSON_FORNAVN)?"":'<dt>Navn</dt><dd><div class="ku-navn">'+O[e].PERSON_FORNAVN+" "+O[e].PERSON_EFTERNAVN+"</div></dd>",a=N(O[e].FOTOURL)?"":'<img class="media-object" src="'+O[e].FOTOURL+'" alt="'+O[e].PERSON_FORNAVN+" "+O[e].PERSON_EFTERNAVN+'">',n=N(O[e].ANSAT_UOFF_STIL_TEKST)?"":"<dt>Titel</dt><dd>"+O[e].ANSAT_UOFF_STIL_TEKST+"</dd>",i=N(O[e].STED_NAVN_SAMLET)?"":"<dt>Enhed/&shy;afdeling</dt><dd>"+O[e].STED_NAVN_SAMLET+"</dd>",l=N(O[e].ANSAT_FUNKTION)?"":"<dt>Funktion</dt><dd>"+O[e].ANSAT_FUNKTION+"</dd>",s=N(O[e].ANSAT_TLF_SEKR)?"":"<dt>Sekret&aelig;r</dt><dd>"+m(O[e].ANSAT_TLF_SEKR)+"</dd>",o=N(O[e].ANSAT_WWW)?"":"<dt>Website</dt><dd>"+T(O[e].ANSAT_WWW)+"</dd>",r='<dl class="dl-horizontal"><div class="ku-result"><div class="contact-right">'+a+"</div>"+d+n+l+i+'</div><div class="ku-kontakt">'+(N(O[e].ANSAT_ARB_EMAIL)?"":"<dt>E-mail</dt><dd>"+v(O[e].ANSAT_ARB_EMAIL)+"</dd>")+(N(O[e].ANSAT_MOBIL)?"":"<dt>Mobil</dt><dd>"+m(O[e].ANSAT_MOBIL)+"</dd>")+(N(O[e].ANSAT_ARB_TLF)?"":"<dt>Telefon</dt><dd>"+m(O[e].ANSAT_ARB_TLF)+"</dd>")+s+o+(N(O[e].ANSAT_ADRESSE)?"":"<dt>Adresse</dt><dd>"+O[e].ANSAT_ADRESSE+"</dd>")+(N(O[e].LOKATION)?"":"<dt>Lokation</dt><dd>"+O[e].LOKATION+"</dd>")+(N(O[e].BEMAERK)?"":"<dt>Bem&aelig;rk&shy;ninger</dt><dd>"+O[e].BEMAERK+"</dd>")+"</div></dl>";(t=g('<li class="contact-list"/>')).append(r),S.append(t);var c=0==f?1+f:f,A=E<10||E<h?E:h,u=1<E?"resultater.":"resultat.";_.html("Viser "+c+" til "+A+" ud af "+E+" "+u)}}(),g(document).on("click",".page-item",function(t){g("html, body").stop(),g("html, body").animate({scrollTop:g(d).offset().top},500),g(window).bind("mousewheel",function(){g("html, body").stop()})})}})},v=function(t){return!0===/(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/.test(t)?'<a class="ku-mail" href="mailto:'+t+'">'+t+"</a>":t},T=function(t){return!0===/(https?:\/\/[^\s]+)/g.test(t)?'<a href="'+t+'">'+t+"</a>":t},m=function(t){return!0===/^[+]*[(]{0,1}[0-9]{1,3}[)]{0,1}[-\s\./0-9]*$/g.test(t)?'<a href="tel:'+(t=t.replace(/-/g,""))+'">'+t+"</a>":t},N=function(t){return null==t||0===t.length}})}(jQuery);
//# sourceMappingURL=phonebook_da.min.js.map